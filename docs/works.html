<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Works</title>
    <link rel="stylesheet" href="css/works.css" />
</head>
<body>

<h1>My Works</h1>

<!-- FILTER -->
<div class="filter-bar">
    <label for="filter">Sort by:</label>
    <select id="filter" onchange="applyFilter()">
        <option value="newest">Newest → Oldest</option>
        <option value="oldest">Oldest → Newest</option>
    </select>
</div>

<!-- SCROLLABLE IMAGE PROJECT LIST -->
<div id="project-list" class="project-list">

    <!-- Project 1: P5.js -->
    <div class="project-item" data-date="2025-01-12" onclick="openProject('p5')">
        <img src="img/p5thumb.jpg" class="thumb">
        <div class="info">
            <strong>P5.js Sketch</strong>
            <span class="date">2025</span>
        </div>
    </div>

    <!-- Project 2: Scratch + YouTube -->
    <div class="project-item" data-date="2024-11-02" onclick="openProject('quieterrs')">
        <img src="img/ytthumb.jpg" class="thumb">
        <div class="info">
            <strong>Quiet Errs (Scratch + YouTube)</strong>
            <span class="date">2024</span>
        </div>
    </div>

    <!-- Project 3: Itch.io -->
    <div class="project-item" data-date="2024-05-19" onclick="openProject('itch')">
        <img src="img/itchthumb.jpg" class="thumb">
        <div class="info">
            <strong>Itch.io Game</strong>
            <span class="date">2024</span>
        </div>
    </div>

    <!-- Project 4: Website -->
    <div class="project-item" data-date="2023-08-01" onclick="openProject('site')">
        <img src="img/sitethumb.jpg" class="thumb">
        <div class="info">
            <strong>Website Project</strong>
            <span class="date">2023</span>
        </div>
    </div>

</div>

<!-- EMBED AREA (RIGHT OF SIDEBAR) -->
<div id="project-container">
    <p>Select a project.</p>
</div>

<a href="index.html">Back to Scene</a>

<script>
// ---- OPEN PROJECT ----
function openProject(id) {
    const container = document.getElementById("project-container");
    container.innerHTML = ''; // clear previous content

    if (id === "quieterrs") {
        // Create tab buttons
        const tabs = document.createElement('div');
        tabs.className = 'project-tabs';
        tabs.innerHTML = `
            <button class="tab-btn active" onclick="showTab(this, 'scratch')">Scratch</button>
            <button class="tab-btn" onclick="showTab(this, 'youtube')">YouTube</button>
        `;
        container.appendChild(tabs);

        // Scratch iframe
        const scratchDiv = document.createElement('div');
        scratchDiv.id = 'scratch';
        scratchDiv.className = 'embed-container tab-content active';
        scratchDiv.innerHTML = `
            <iframe 
                src="https://scratch.mit.edu/projects/1101838389/embed"
                allowtransparency="true"
                frameborder="0"
                scrolling="no"
                allowfullscreen>
            </iframe>
        `;
        container.appendChild(scratchDiv);

        // YouTube iframe
        const youtubeDiv = document.createElement('div');
        youtubeDiv.id = 'youtube';
        youtubeDiv.className = 'embed-container tab-content';
        youtubeDiv.innerHTML = `
            <iframe 
                src="https://www.youtube.com/embed/ogaDnvd_2Ug"
                title="(IMA) Final Project : Quiet Errs (gameplay)"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen>
            </iframe>
        `;
        container.appendChild(youtubeDiv);
    }
    else {
        const embeds = {
            p5: `<div class="embed-container"><iframe src="https://editor.p5js.org/Aoriki/full/NQvpKe2Sn"></iframe></div>`,
            itch: `<div class="embed-container"><iframe src="https://itch.io/embed-upload/123456"></iframe></div>`,
            site: `<div class="embed-container"><iframe src="https://example.com"></iframe></div>`
        };
        container.innerHTML = embeds[id] || `<p>Project content not available.</p>`;
    }
}

// Tab switch function
function showTab(button, tabId) {
    const container = document.getElementById("project-container");
    const tabs = container.getElementsByClassName("tab-btn");
    const contents = container.getElementsByClassName("tab-content");

    // Remove active from all buttons
    Array.from(tabs).forEach(btn => btn.classList.remove("active"));
    button.classList.add("active");

    // Hide all tab content
    Array.from(contents).forEach(c => c.classList.remove("active"));
    // Show selected
    document.getElementById(tabId).classList.add("active");
}

// ---- CHRONOLOGICAL FILTER ----
function applyFilter() {
    const list = document.getElementById("project-list");
    const items = Array.from(list.getElementsByClassName("project-item"));
    const filter = document.getElementById("filter").value;

    items.sort((a, b) => {
        const dateA = new Date(a.dataset.date);
        const dateB = new Date(b.dataset.date);
        return filter === "newest" ? dateB - dateA : dateA - dateB;
    });

    items.forEach(item => list.appendChild(item));
}

// Apply filter on page load
applyFilter();
</script>

</body>
</html>

